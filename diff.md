# 本项目使用的 diff 语法

这套 diff 语法名为 `area-diff`，基于 `git-diff` 修改而来，详细规则如下：

1. `data` 目录下的每一个文件称为一个**区划代码数据表**，简称**数据表**。数据表的每一行称为一条**区划代码记录**，简称**记录**。每一条记录都与一定范围的区域相对应，称为**该记录对应的区域**；
1. `diff` 目录下的每一个文件称为一个**差异表**，包含相应的两个数据表中记录的差异，其中作为相对参考的数据表称为**源表**，与之相对的数据表称为**目标表**；
1. 差异表的原始内容是通过对相应的数据表执行 `git diff -U0 --no-index` 并去除无关行后得到的；
1. 差异表的每一行分为三种类型，由其首字符决定，分别为**删除行** (-), **增加行** (+) 及**注释行**（其他字符）。其中删除行和增加行统称为**变更行**，每一变更行都与相应的数据表中的一条记录相对应，称为**该行的记录**；
1. 以下规则中所指的**变更行**是内容经过手动或自动修改的，未经修改的变更行不服从以下规则；
1. 变更行的原始内容**必须**位于其行首处。原始内容之后到行尾的内容称为该变更行的**属性**，用于说明该行的记录与相关记录间的映射关系；
1. 增加（删除）行的记录位于目标（源）表中。增加（删除）行的属性，包含源（目标）表中所有 **对应的区域与该行的记录对应的区域有交集** 的记录。
